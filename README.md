# A/B Test Validator

Инструмент для планирования, валидации и анализа A/B тестов с удобным веб-интерфейсом.

## Возможности

### 1. Планирование A/B тестов
- Расчет необходимого размера выборки на основе базовой конверсии, MDE, уровня значимости и мощности
- Визуализация кривых зависимости мощности от размера выборки
- Расчет минимально детектируемого эффекта (MDE) для заданного размера выборки

### 2. Валидация A/B тестов
- Проверка равномерности распределения пользователей между группами (SRM check)
- Анализ однородности групп по категориальным признакам (по странам)
- Визуализация распределения пользователей по группам и категориям

### 3. Анализ результатов
- Расчет конверсии в каждой группе и uplift
- Статистическая проверка значимости результатов (p-value)
- Расчет доверительных интервалов для абсолютной разницы и uplift
- Визуализация результатов эксперимента

## Установка и запуск

### Требования
- Python 3.8+
- Зависимости из requirements.txt

### Установка

```bash
# Клонирование репозитория (если используется Git)
git clone <url-репозитория>
cd ABTestChecker

# Установка зависимостей
pip install -r requirements.txt
```

### Запуск

```bash
streamlit run app.py
```

После запуска приложение будет доступно по адресу: http://localhost:8501

## Структура проекта

```
ABTestChecker/
├── app.py                # Основной файл приложения Streamlit
├── requirements.txt      # Зависимости проекта
├── README.md             # Документация
└── planner/              # Модули для работы с A/B тестами
    ├── __init__.py       
    ├── sample_size.py    # Модуль для планирования тестов
    └── test_validator.py # Модуль для валидации и анализа результатов
```

## Использование

### Загрузка данных

Приложение работает с CSV-файлами, содержащими следующие обязательные столбцы:
- `user_id` - идентификатор пользователя
- `group` - группа теста (A или B)
- `conversion` - целевое действие (1 или 0)
- `country` - страна пользователя

Пример можно сгенерировать, нажав кнопку "Сгенерировать пример данных" в боковой панели.

### Работа с приложением

1. В боковой панели укажите параметры A/B теста
2. Выберите нужную вкладку для работы:
   - "Планирование" - для расчета размера выборки перед запуском теста
   - "Валидация" - для проверки корректности распределения пользователей
   - "Результаты" - для анализа итогов тестирования
3. Загрузите файл с данными для анализа (для вкладок "Валидация" и "Результаты")

## Примечания по статистическим методам

- SRM (Sample Ratio Mismatch) проверка использует хи-квадрат тест для сравнения фактического распределения пользователей по группам с ожидаемым 50/50
- Для сравнения пропорций используется Z-тест (proportions_ztest из statsmodels)
- Доверительные интервалы рассчитываются с использованием стандартной ошибки разницы пропорций
- Уровень значимости по умолчанию: alpha = 0.05
- Мощность теста по умолчанию: power = 0.8
